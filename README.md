# [Team3 - Todo App](https://11th-team3-week1-todo.netlify.app)

👆🏻 제목을 클릭하면 배포된 사이트를 확인하실 수 있습니다.

<br/>

## 🗓️ 기간

- 2023년 6월 27일 ~ 2023년 06월 30일

## 🧭 목적

- 동료학습 및 협업능력과 새로운 인사이트

<br/>

## 💡 진행방식

1.  팀 컨벤션을 지정하여 [위키](https://github.com/wanted-pre-onboarding-11th-team3/pre-onboarding-11th-1-3/wiki/Team-convention#commit-convention)에 정리해 두었습니다.
2.  [팀 노션](https://www.notion.so/3-5ae5a568e91640bb960bee97a98327a7?pvs=4)을 활용하여 각자의 사전과제를 보고 Best Practice라고 생각되는 과제에 투표를 합니다. (Login/SignUp, Todo)
3.  팀원들의 원티드 인턴십 사전과제 중, 각각 Best Practice로 선발된 코드를 팀 프로젝트에 반영하고 VScode의 "Live Share" 확장프로그램을 사용하여 서로의 코드 작성법을 실시간으로 보며 함께 리팩토링을 진행하였습니다.
4.  원격 브랜치에 pr을 올린 후, 한번 더 코드를 확인 한 후, 3명이상 승인을 받으면 develop 브랜치로 Merge합니다.

<br/>

## 🎖️ Members

<table border>
  <tbody>
    <tr>
      <td align="center" width="200px">
        <img width="100%" src="https://avatars.githubusercontent.com/u/64674174?v=4"  alt=""/>
        팀장 FE.<br/>
        <a href="https://github.com/hyerimhan">
          <img src="https://img.shields.io/badge/한혜림-000000?style=flat-round&logo=GitHub&logoColor=white"/>
        </a>
      </td>
      <td align="center" width="200px">
        <img width="100%" src="https://avatars.githubusercontent.com/u/111730140?v=4"  alt=""/><br />
        팀원 FE.<br/>
        <a href="https://github.com/ImGyuriKim">
          <img src="https://img.shields.io/badge/김규리-000000?style=flat-round&logo=GitHub&logoColor=white"/>
        </a>
      </td>
      <td align="center" width="200px">
        <img width="100%" src="https://avatars.githubusercontent.com/u/117807467?v=4"  alt=""/><br />
        팀원 FE.<br/>
        <a href="https://github.com/jh1109">
          <img src="https://img.shields.io/badge/노주희-000000?style=flat-round&logo=GitHub&logoColor=white"/>
        </a>
      </td>
      <td align="center" width="200px">
        <img width="100%" src="https://avatars.githubusercontent.com/u/94950829?v=4"  alt=""/>
        팀원 FE.<br/>
        <a href="https://github.com/NONONCRUST">
          <img src="https://img.shields.io/badge/신상호-000000?style=flat-round&logo=GitHub&logoColor=white"/>
        </a>
      </td>
      <td align="center" width="200px">
        <img width="100%" src="https://avatars.githubusercontent.com/u/44185091?v=4"  alt=""/>
        팀원 FE.<br/>
        <a href="https://github.com/marie-ming">
          <img src="https://img.shields.io/badge/정민지-000000?style=flat-round&logo=GitHub&logoColor=white"/>
        </a>
      </td>
      <td align="center" width="200px">
        <img width="100%" src="https://avatars.githubusercontent.com/u/92035406?v=4"  alt=""/>
        팀원 FE.<br/>
        <a href="https://github.com/hanseungjune">
          <img src="https://img.shields.io/badge/한승준-000000?style=flat-round&logo=GitHub&logoColor=white"/>
        </a>
      </td>
     </tr>
  </tbody>
</table>

<br/>

## 🛠️ Stacks

![react](https://user-images.githubusercontent.com/123078739/234895132-18ab503a-fcc7-486d-b89a-cb0cc1f7796b.svg) ![eslint](https://user-images.githubusercontent.com/123078739/234895191-c1198a7b-9e2e-499a-8e61-c3b87bf8e2c2.svg)
![prettier](https://img.shields.io/badge/prettier-F7B93E?style=for-the-badge&logo=prettier&logoColor=black) ![Axios](https://img.shields.io/badge/axios-5A29E4?style=for-the-badge&logo=axios&logoColor=white) ![typescript](https://user-images.githubusercontent.com/123078739/234895162-42f905c6-765d-44d2-bcb1-b011286ef6b2.svg) ![styledcomponents](https://user-images.githubusercontent.com/123078739/234895185-7fd6c334-faca-4520-8551-2f20b32f085e.svg)

<br/>

## 👑 Best Practice

> Best Practice란 모범사례라는 말로서, 특정 문제를 효과적으로 해결하기 위한 가장 성공적인 해결책 또는 방법론을 의미합니다.

### 📍 기능 (CRUD)

- [회원가입](#signup--login)
- [로그인 / 로그아웃](#signup--login)
- [Todo](#todo)
- [Redirect Route](#redirect-route)

<table border>
  <tr>
    <td><img src="https://github.com/hyerimhan/pre-onboarding-11th-1-3/assets/64674174/2db38b44-0260-4475-a352-1a6bbf226a64" alt="회원가입"/></td>
    <td><img src="https://github.com/hyerimhan/pre-onboarding-11th-1-3/assets/64674174/8fdfc5cc-4681-4acd-bb03-8f5bb41cf9ca" alt="로그인"/></td>
  </tr>
  <tr>
    <td align="center">회원가입</td>
    <td align="center">로그인</td>
  </tr>
  <tr>
    <td><img src="https://github.com/hyerimhan/pre-onboarding-11th-1-3/assets/64674174/5148fdc9-fdfb-4600-8239-f259d1163420" alt="Todo"/></td>
    <td><img src="https://github.com/hyerimhan/pre-onboarding-11th-1-3/assets/64674174/82069f6d-0a05-40c9-ad7d-21ffd4ff836e" alt="redirectRoute"/></td>
  </tr>
  <tr>
    <td align="center">Todo</td>
    <td align="center">Redirect Route</td>
  </tr>
</table>

### 🌳 File Tree

```
📦src
┣ 📂apis
┃ ┣ 📜auth.ts
┃ ┣ 📜instance.ts
┃ ┗ 📜todo.ts
┣ 📂components
┃ ┣ 📂auth
┃ ┃ ┣ 📜AuthContainer.presenter.tsx
┃ ┃ ┗ 📜AuthContainer.tsx
┃ ┣ 📂common
┃ ┃ ┣ 📜Button.tsx
┃ ┃ ┣ 📜Input.tsx
┃ ┃ ┗ 📜Title.tsx
┃ ┗ 📂todo
┃ ┃ ┣ 📜TodoAdd.tsx
┃ ┃ ┣ 📜TodoHeader.tsx
┃ ┃ ┗ 📜TodoList.tsx
┣ 📂interfaces
┃ ┣ 📜auth.ts
┃ ┗ 📜todo.ts
┣ 📂pages
┃ ┣ 📜Home.tsx
┃ ┣ 📜Login.tsx
┃ ┣ 📜NotFound.tsx
┃ ┣ 📜Signup.tsx
┃ ┗ 📜Todo.tsx
┣ 📂routes
┃ ┣ 📜RedirectRoute.tsx
┃ ┗ 📜router.tsx
┣ 📂utils
┃ ┗ 📜storage.ts
┣ 📜App.tsx
┣ 📜GlobalStyle.ts
┣ 📜index.tsx
┗ 📜react-app-env.d.ts
```

### 🔒 SignUp / Login

#### ❓ 선정이유

- 전체적인 구조가 깔끔하고 잘 정리되었습니다.
- 디렉토리 구조가 의미에 맞게 잘 세분화 되어있습니다.
- 로그인, 회원가입 입력폼이 똑같기 때문에 공통 컴포넌트로 만들고 각각 페이지에서 import하는 방식을 채택하였습니다.

#### 💥트러블 슈팅

- 이슈

  - 이메일 or 비밀번호 입력 후 입력값을 삭제시, 에러메세지가 사라지지 않는 이슈를 발견하였습니다.

    ```Javascript
    // AuthContainer.tsx
    const [form, setForm] = useState<IAuthType>({
    email: '',
    password: '',
    });

    const [isValid, setIsValid] = useState<IAuthValidType>({
    isEmail: false,
    isPassword: false,
    });

    const [disabled, setDisabled] = useState(true);

    useEffect(() => {
    setDisabled(!(isValid.isEmail && isValid.isPassword));
    }, [isValid.isEmail, isValid.isPassword]);

    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {
      event.preventDefault();
      const current = event.target.value;

      switch (event.target.type) {
        case 'email':
          const regex = /\S+@\S+\.\S+/;

          if (!regex.test(current)) {
            setErrorMessage({
              ...errorMessage,
              emailError: '이메일 형식을 확인해 주세요.',
            });
            setIsValid({ ...isValid, isEmail: false });
            setDisabled(true);
          } else {
            setErrorMessage({ ...errorMessage, emailError: '' });
            setIsValid({ ...isValid, isEmail: true });
          }
          setForm({ ...form, email: current });
          break;
        case 'password':
          if (current.length < 8) {
            setErrorMessage({
              ...errorMessage,
              passwordError: '8자 이상 입력해주세요.',
            });
            setIsValid({ ...isValid, isPassword: false });
            setDisabled(true);
          } else {
            setErrorMessage({
              ...errorMessage,
              passwordError: '',
            });
            setIsValid({ ...isValid, isPassword: true });
            setDisabled(false);
          }
          setForm({ ...form, password: current });
          break;
      }
    };
    ```

    ![authBefore](https://github.com/hyerimhan/pre-onboarding-11th-1-3/assets/64674174/5cb87bb7-0701-4b07-8eac-ba6c3489f914)

  <br/>

- 해결

  - 불필요한 state를 삭제(isValid, disable, errorMessage)하고 에러메세지는 유효성 유무를 판단하는 상태(isValid)를 넘겨주고 입력값이 없으면 에러메세지가 비활성화 되도록 구현하였습니다.

    - ❗ 다음은 state가 아닙니다. (불필요한 state)

      - 부모로부터 props를 통해 전달.
      - 시간이 지나도 변하지 않음.
      - 컴포넌트 안의 다른 state나 props를 가지고 계산 가능.

    ```Javascript
     // AuthContainer.tsx
    const [form, setForm] = useState<IAuthType>({
        email: '',
        password: '',
      });

    const isValid = {
      isEmail: /\S+@\S+\.\S+/.test(form.email),
      isPassword: form.password.length >= 8,
    };

    const isDisable = !isValid.isEmail || !isValid.isPassword;

    const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {
      event.preventDefault();
      const current = event.target.value;

      switch (event.target.type) {
        case 'email':
          setForm(prev => ({ ...prev, email: current }));
          break;
        case 'password':
          setForm(prev => ({ ...prev, password: current }));
          break;
      }
    };

    const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {
      event.preventDefault();
      onSubmit(form.email, form.password);
    };
    ```

    ![authAfter](https://github.com/hyerimhan/pre-onboarding-11th-1-3/assets/64674174/99a9c73b-846e-4425-ad27-a4177a159eb2)

- 유지보수와 가독성을 위해 컴포넌트의 함수는 한번에 한가지 일만 처리해야 합니다.

  - ❌ Bad

    ```Javascript
    // AuthContainer.tsx
    const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {
      event.preventDefault();
      try {
        setDisabled(true);
        if (location === '/signup') {
          await SIGNUP({
            email: form.email,
            password: form.password,
          });
          alert('회원가입이 성공하였습니다!\n로그인을 시도해주세요.');
          navigate('/signin');
        }
        if (location === '/signin') {
          await SIGNIN({
            email: form.email,
            password: form.password,
          });
          alert('환영합니다!');
          navigate('/todo');
        }
      } catch (error: any) {
        alert(
          location === '/signup'
            ? error.response.data.message
            : location === '/signin'
            ? '이메일이나 비밀번호를 다시 확인해주세요.'
            : ''
        );
      }
    };

    ```

    ```Javascript
    // Login.tsx
    const Login = () => {
      return <AuthContainer title="로그인" dataTestid="signin-button" />;
    };
    ```

    ```Javascript
    // Signup.tsx
    const Signup = () => {
      return <AuthContainer title="회원가입" dataTestid="signup-button" />;
    };
    ```

  - ⭕ Good

    ```Javascript
    // AuthContainer.tsx
    const handleSubmit = async (event: React.FormEvent<HTMLFormElement>) => {
      event.preventDefault();
      onSubmit(form.email, form.password);
    };
    ```

    ```Javascript
    // Login.tsx
    const Login = () => {
      const signin = async (email: string, password: string) => {
        try {
          const response = await SIGNIN({
            email,
            password,
          });
          alert('환영합니다!');
          navigate('/todo');
          if (!response) {
            throw new Error('이메일이나 비밀번호를 다시 확인해주세요');
          }
        } catch (error: any) {
          alert(error.message);
        }
      };

      return (
        <AuthContainer
          title="로그인"
          dataTestid="signin-button"
          onSubmit={signin}
        />
      );
    };
    ```

    ```Javascript
    // Signup.tsx
    const Signup = () => {
      const signup = async (email: string, password: string) => {
        try {
          await SIGNUP({
            email,
            password,
          });
          alert('회원가입이 성공하였습니다!\n로그인을 시도해주세요.');
          navigate('/signin');
        } catch (error: any) {
          alert(error.response.data.message);
        }
      };

      return (
        <AuthContainer
          title="회원가입"
          dataTestid="signup-button"
          onSubmit={signup}
        />
      );
    }
    ```

   <br/>

### ✅ TODO

#### ❓ 선정이유

- 할일을 입력할 수 있는 영역인 TodoAdd.tsx와 여기서 입력받은 내용들을 보여주는 영역인 TodoList.tsx로 컴포넌트를 나눠서 코드를 재사용하거나 유지보수하기 편리할 것 같다는 생각이 들었습니다.

<br/>

### 🚩 Redirect Route

#### ❓ 선정이유

- 페이지 컴포넌트 내부에 리다이렉션 로직을 작성하게 되면 컴포넌트 렌더링 이후에 로직이 실행되기 때문에 불필요한 렌더링이 생길 수 있습니다. 반면에 컴포넌트로 분리해서 컴포넌트 트리 윗부분에 위치시키면 페이지 컴포넌트가 렌더링되기전에 페이지를 이동시킬 수 있고 관심사도 분리되기 때문에 아주 좋은 구현 방법이라고 생각합니다!

#### 💥트러블 슈팅

- 이슈

  - 안정성을 위하여 try catch문을 활용하여 api를 불러오는 방법으로 코드를 수정하였는데, RedirectRoute에 설정해 놓은 alert 창과 각 컴포넌트에 설정해놓은 try catch문에서 에러가 발생하는 catch문의 error메세지가 한꺼번에 활성화되어 alert메세지가 불필요하게 2번 활성화되는 이슈를 발견하였습니다.

    ```javascript
    useEffect(() => {
      if (accessToken && (location === '/signup' || location === '/signin')) {
        alert('로그인 상태입니다!');
        navigate('/todo');
      }
      if (!accessToken && location === '/todo') {
        alert('로그인이 필요해요!');
        navigate('/signin');
      }
    }, [navigate, location, accessToken]);
    ```

- 해결

  - 불필요한 useEffect는 삭제하고, return 할 수 있도록 `navigate()`를 `<Navigate to=""/>`로 변경하여 더 이상 실행할 필요가 없는 경우 한번만 실행되도록 하였습니다.

    ```javascript
    if (accessToken && (location === '/signup' || location === '/signin')) {
      alert('로그인 상태입니다!');
      return <Navigate to="/todo" replace />;
    }
    if (!accessToken && location === '/todo') {
      alert('로그인이 필요해요!');
      return <Navigate to="/signin" replace />;
    }
    ```

<br/>

## ✒️ 회고

<table border>
  <thead>
    <tr>
      <th width="10%">이름</th>
      <th width="45%">좋았던 점</th>
      <th width="45%">아쉬웠던 점</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="center">규리</td>
      <td>
        - 같은 기능임에도 각자 다른 설계와 코드를 짜온 것을 보고 “이렇게 구현할 수도 있구나” 하고 많이 배웠다.<br/>
        - 코드 짜는 과정에서 제가 고려하지 못한 사항들까지 고려하여 꼼꼼히 처리하신 분들의 코드를 보고 많이 배웠다.<br/>
        - 프로젝트 폴더 구조를 짜고 모듈화하는 것의 장점을 크게 느꼈다. (가독성이 훨씬 좋아짐!)
      </td>
      <td>
        - 채용과제로 인해 적극적으로 참여하지 못해 아쉬웠다. 다음주 과제부터는 더 기여도를 높여 많이 배웠으면 좋겠다.
      </td>
    </tr>
    <tr>
      <td align="center">주희</td>
      <td>
        - 미팅 때마다 분위기가 너무 좋았다. 모두 적극적으로 열심히 하는 분위기였다. (우리 팀 모두 MBTI S와 J!!)<br/>
        - 다른 사람의 코드를 제대로 처음 보는 기회였는데 디렉토리 구조와 모듈화가 잘 되어 있어서 이점을 배웠습니다!
      </td>
      <td>
        - 여러명의 코드를 하나의 코드로 합치는 부분이 어려웠다. 다음 과제부터는 구조나 스타일 등의 기술스택 등은 토론을 통해 정한 후 과제를 시작하는 것이 좋을 것 같다.
      </td>
    </tr>
    <tr>
      <td align="center">상호</td>
      <td>
      - 같은 요구사항에 대한 다양한 접근 방법을 접할 수 있어 도움이 많이 되었다.<br/>
      - 서로의 코드를 피드백 하는 과정에서 효율적인 코드와 더 나은 가독성을 유지하는 것에 대해 생각해 볼 수 있었다.
      </td>
      <td>
      - 참여하지 못한 부분이 많아 아쉬웠다.
      </td>
    </tr>
    <tr>
      <td align="center">민지</td>
      <td>
      - 동일한 기능들을 여러 사람의 코드를 보고 Best Practice 정하는 과정이 흥미로웠고 시야가 넓어질 수 있었다.<br/>
      - 다양한 시점으로 리팩토링 하니 더 효과적으로 진행할 수 있었다. 놓쳤던 부분을 챙겨 갈 수 있었음.<br/>
      - 모두 적극적 참여하여 좀 더 의욕이 생겼다.
      </td>
      <td>
      - 스타일이 다 다른 코드를 합치고 리팩토링 하는 것이 시간 소요가 상당했다.
      </td>
    </tr>
    <tr>
      <td align="center">승준</td>
      <td>
        - 다들 저보다 에너지가 좋으셔서 든든했고, 재밌었다.<br/>
        - 다양한 코드 스타일을 보고 생각해보지 못했던 점을 보고 많이 배웠다.<br/>
        - 모듈화에 대한 생각을 깊게 해본적은 없었는데.. 이번에 배우고 많이 깨달았다.
      </td>
      <td>
      - LiveShare를 할 때, 네트워크 상 문제가 있어서 느렸다. 그래서 답답했고 아쉬웠다.<br/>
      - 다음에는 팀장을 통해서 병합여부를 판단하고 진행하면 좋을 것 같다. (사실 Best Practice 를 정하고 진행하는거라 이번 프로젝트는 불가능 하긴 함.)
      </td>
    </tr>
    <tr>
      <td align="center">혜림</td>
      <td>
      - 하나의 코드를 보면서 팀원들의 다양한 인사이트와 다양한 코드 작성법을 볼 수 있어서 좋았다.<br/>
      - Best Practice를 선발하느라 다른 사람의 코드를 꽤 자세히 볼 수 있는 기회를 얻을 수 있어서 좋았다.<br/>
      - 팀원들과 커뮤니케이션이 잘 돼서 좋았다.
      </td>
      <td>
      - 초반에 우왕좌왕하느라 프로젝트 세팅하는데 생각보다 시간이 많이 들었다.
      </td>
    </tr>
  </tbody>
</table>
